<%= form_for(new_equipment_customer, remote: true) do |f| %>
  <%= f.hidden_field :service_id, value: service.id %>

  <div class="row">
    <div class="col-md-6">
      <div class="form-group <%= 'has-error' if new_equipment_customer.errors[:equipment_id].first %>">
        <label>Equipo:</label>
        <%= f.collection_select :equipment_id, [], :id, :name, { prompt: "Seleccione un equipo" }, class: "form-control autocomplete_equipments", required: true %>
        <div class="help-block"><%= new_equipment_customer.errors[:equipment_id].first %></div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="form-group">
        <label>Marca:</label>
        <%= f.collection_select :brand_id, [], :id, :name, { prompt: "Seleccione una marca" }, class: "form-control autocomplete_brands", required: true %>
        <div class="invalid-feedback"><%= new_equipment_customer.errors[:brand_id].first %></div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-6">
      <div class="form-group <%= 'has-error' if new_equipment_customer.errors[:equipment_model_id].first %>">
        <label>Modelo:</label>
        <%= f.collection_select :equipment_model_id, [], :id, :name, { prompt: "Seleccione un modelo" }, class: "form-control autocomplete_equipment_models", required: true %>
        <div class="help-block"><%= new_equipment_customer.errors[:equipment_model_id].first %></div>
      </div>
    </div>
  </div>

  <div class="row">
    <label class="text-center" style="display: block;">COMPONENTES QUE DEJA CON EL EQUIPO</label>
    <div class="col-sm-6">
      <div class="form-group row">
        <% Component.first(3).each do |component| %>
          <div class="col-sm-4 text-left">
            <label>
                <%= check_box_tag "equipment_customer[component_ids][]", component.id, new_equipment_customer.components.include?(component) %>
                <%= component.name %>
            </label>
          </div>
        <% end %>
      </div>
      <div class="form-group row">
        <% Component.last(3).each do |component| %>
          <div class="col-sm-4 text-left">
            <label>
                <%= check_box_tag "equipment_customer[component_ids][]", component.id, new_equipment_customer.components.include?(component) %>
                <%= component.name %>
            </label>
          </div>
        <% end %>
      </div>
    </div>

    <div class="col-sm-6">
      <div class="form-group <%= 'has-error' if new_equipment_customer.errors[:equipment_model_id].first %>">
        <label>Cable:</label>
        <%= f.collection_select :cable_type_id, [], :id, :name, { prompt: "Seleccione un cable" }, class: "form-control autocomplete_cable_types", required: true %>
        <div class="help-block"><%= new_equipment_customer.errors[:cable_type_id].first %></div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <div class="form-group">
        <label>Descripci√≥n:</label>
        <%= f.text_area :description, class: "form-control textarea_new_equipment_customer" %>
        <div class="invalid-feedback"><%= new_equipment_customer.errors[:description].first %></div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <%= render 'equipment_customers/message_history_form', equipment_customer: new_equipment_customer %>
    </div>
  </div>

  <%= f.submit "Guardar", class: "btn btn-primary btn-block" %>
<% end %>

<script>
  $(document).ready(function() {
    $('.autocomplete_cable_types').select2({
      minimumInputLength: 1,
      ajax: {
        delay: 250,
        url: "/equipment_customers/autocomplete_cable_types",
        dataType: 'json',
        cache: true
      }
    });

    $('.autocomplete_equipments').select2({
      minimumInputLength: 1,
      ajax: {
        delay: 250,
        url: "/equipments/autocomplete",
        dataType: 'json',
        cache: true
      }
    });

    $('.autocomplete_brands').select2({
      minimumInputLength: 1,
      ajax: {
        delay: 250,
        url: "/brands/autocomplete",
        dataType: 'json',
        cache: true
      }
    });

    $('.autocomplete_equipment_models').select2({
      minimumInputLength: 1,
      ajax: {
        delay: 250,
        url: "/equipment_models/autocomplete",
        dataType: 'json',
        cache: true
      }
    });

    $('.textarea_new_equipment_customer').wysihtml5();
  });
</script>
