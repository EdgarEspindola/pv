<%= form_tag(transfer_printing_products_url, html: { class: "form-horizontal" }) do |f| %>
  <div class="box-body">
    <div class="form-group">
      <label class="col-sm-2 control-label">CÃ³digo</label>
      <%= hidden_field_tag 'translate[source_product_id]', @printing_product.id %>
      <div class="col-sm-10">
        <%= text_field_tag "translate[code]", nil, class: "form-control", required: true, readonly: true %>
      </div>
    </div>

    <div class="form-group">
      <label class="col-sm-2 control-label">Nombre</label>
      <div class="col-sm-10">
        <%#= text_field_tag "translate[name]", nil, class: "form-control translate-name", required: true %>
        <%= select_tag "translate[destination_product_id]", options_for_select([]), { class: 'form-control translate-name', required: true, prompt: "Buscar producto" } %>
      </div>
    </div>

    <div class="form-group">
      <label class="col-sm-2 control-label">Stock</label>
      <div class="col-sm-5">
        <%= text_field_tag "translate[unit_to_discount]", @total_units, class: "form-control", required: true %>
      </div>
      <div class="col-sm-5">
        <%= text_field_tag "translate[stock_unit]", @printing_product.contain_unit, class: "form-control", required: true, autofocus: true, readonly: true %>
      </div>
    </div>

    <div class="form-group">
      <label class="col-sm-2 control-label">Fotografia</label>
      <div class="col-sm-10">
        <img id="img_product" width=200 height=200 src="" alt="Fotografia" class="img-thumbnail"/>
      </div>
    </div>

  <div class="box-footer">
    <%= submit_tag "Guardar", class: "btn btn-info pull-right btn-block" %>
  </div>

<% end %>

<script>
  $(document).ready(function() {
    $('.translate-name').select2({
      dropdownParent: $('#form-modal'),
  		minimumInputLength: 1,
  		ajax: {
  			delay: 250,
  			url: "/printing_products/autocomplete?product_id=<%= @printing_product.id %>",
  			dataType: 'json',
  			cache: true
  		}
  	});
    $('.translate-name').on('select2:select', function (e) {
        var data = e.params.data;
        console.log(data);
        //$("#tra").val(data.name);
        $("#translate_code").val(data.code);
        $("#img_product").attr("src", data.url_img);
    });
  });
</script>
